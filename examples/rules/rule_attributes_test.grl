// Advanced rule attributes test file for v0.6.0

rule "ValidationRule" agenda-group "validation" salience 10 {
    when
        User.age >= 18
    then
        User.status = "valid";
        log("User validated");
}

rule "PremiumDiscount" activation-group "discount" salience 20 {
    when
        Customer.tier == "premium"
    then
        Order.discount = 0.20;
        log("Premium discount applied");
}

rule "GoldDiscount" activation-group "discount" salience 15 {
    when
        Customer.tier == "gold"
    then
        Order.discount = 0.15;
        log("Gold discount applied");
}

rule "WelcomeEmail" lock-on-active agenda-group "onboarding" salience 10 {
    when
        Customer.isNew == true
    then
        Customer.welcomeEmailSent = true;
        log("Welcome email sent");
}

rule "SeasonalPromotion" 
    date-effective "2025-12-01T00:00:00Z" 
    date-expires "2025-12-31T23:59:59Z" 
    salience 25 {
    when
        Order.total > 100
    then
        Order.seasonalDiscount = 0.30;
        log("Seasonal promotion applied");
}

rule "ExpiredRule"
    date-effective "2020-01-01T00:00:00Z"
    date-expires "2020-12-31T23:59:59Z"
    salience 5 {
    when
        Customer.legacy == true
    then
        Customer.legacyProcessing = true;
        log("Legacy processing");
}

rule "FutureRule"
    date-effective "2030-01-01T00:00:00Z"
    salience 5 {
    when
        Technology.advanced == true
    then
        Technology.futureFeature = true;
        log("Future feature activated");
}

rule "ComplexRule"
    agenda-group "processing"
    activation-group "payment"
    lock-on-active
    no-loop
    salience 30 {
    when
        Order.status == "pending" && Payment.method == "credit"
    then
        Order.status = "processed";
        Payment.confirmed = true;
        log("Complex payment processing completed");
}
